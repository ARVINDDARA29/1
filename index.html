<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="monetag" content="58e2954bf0a854d2f0d747ecce1e8bbc">
    <meta name="b448b54f4ed44237d86986f5a565b98127a55ba8" content="b448b54f4ed44237d86986f5a565b98127a55ba8" />
    <title>BISHNOI 29 - ‡§∞‡§ø‡§µ‡•â‡§∞‡•ç‡§° ‡§ê‡§™</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* ‡§ï‡§∏‡•ç‡§ü‡§Æ CSS ‡§®‡§ø‡§Ø‡§Æ */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #151A25; /* ‡§ó‡§π‡§∞‡§æ ‡§®‡•Ä‡§≤‡§æ-‡§¨‡•à‡§Ç‡§ó‡§®‡•Ä */
            color: #E0E7FF; /* ‡§π‡§≤‡•ç‡§ï‡§æ ‡§®‡•Ä‡§≤‡§æ-‡§∏‡§´‡•á‡§¶ */
            overflow-x: hidden; /* ‡§ï‡•ç‡§∑‡•à‡§§‡§ø‡§ú ‡§∏‡•ç‡§ï‡•ç‡§∞‡•â‡§≤‡§ø‡§Ç‡§ó ‡§ï‡•ã ‡§∞‡•ã‡§ï‡•á‡§Ç */
        }
        .app-wrapper {
            width: 100%;
            max-width: 480px;
            margin: 0 auto;
            background-color: #1A202C; /* ‡§•‡•ã‡§°‡§º‡§æ ‡§π‡§≤‡•ç‡§ï‡§æ ‡§ó‡§π‡§∞‡§æ ‡§®‡•Ä‡§≤‡§æ */
            min-height: 100vh;
            box-shadow: 0 0 40px rgba(0,0,0,0.6);
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden; /* ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§ú‡•Ä‡§∂‡§® ‡§ï‡•á ‡§≤‡§ø‡§è */
        }
        main {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        .screen {
            display: none;
            flex-direction: column;
            width: 100%;
            flex-grow: 1;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            transition: transform 0.5s ease-in-out, opacity 0.5s ease-in-out;
            transform: translateX(100%); /* ‡§°‡§ø‡§´‡§º‡•â‡§≤‡•ç‡§ü ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§ë‡§´‡§º‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® */
            opacity: 0;
            padding: 1.5rem; /* ‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç ‡§ï‡§ø ‡§∏‡§≠‡•Ä ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§Æ‡•á‡§Ç ‡§™‡•à‡§°‡§ø‡§Ç‡§ó ‡§π‡•ã */
        }
        .screen.active {
            display: flex;
            transform: translateX(0); /* ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§π‡•ã‡§®‡•á ‡§™‡§∞ ‡§ë‡§®‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® */
            opacity: 1;
        }
        .screen.prev { /* ‡§™‡§ø‡§õ‡§≤‡•Ä ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ú‡•ã ‡§¨‡§æ‡§à‡§Ç ‡§ì‡§∞ ‡§∏‡•ç‡§≤‡§æ‡§á‡§° ‡§π‡•ã‡§§‡•Ä ‡§π‡•à */
            transform: translateX(-100%);
            opacity: 0;
        }
        .screen.next { /* ‡§Ö‡§ó‡§≤‡•Ä ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ú‡•ã ‡§¶‡§æ‡§à‡§Ç ‡§ì‡§∞ ‡§∏‡•ç‡§≤‡§æ‡§á‡§° ‡§π‡•ã‡§§‡•Ä ‡§π‡•à */
            transform: translateX(100%);
            opacity: 0;
        }

        /* ‡§π‡•á‡§°‡§ø‡§Ç‡§ó ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡•ã‡§™‡§ø‡§Ç‡§∏ ‡§´‡§º‡•â‡§®‡•ç‡§ü */
        h1, h2, h3 {
            font-family: 'Poppins', sans-serif;
            color: #FFFFFF;
        }

        .button-primary {
            background: linear-gradient(90deg, #FF6B6B, #FFB86B); /* ‡§®‡§∞‡§Æ ‡§≤‡§æ‡§≤ ‡§∏‡•á ‡§®‡§æ‡§∞‡§Ç‡§ó‡•Ä */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            font-weight: 700;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
            border: none;
            position: relative;
            overflow: hidden;
        }
        .button-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(255, 107, 107, 0.6);
        }
        .button-primary::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1) translate(-50%, -50%);
            transition: all 0.5s ease-out;
        }
        .button-primary:active::after {
            transform: scale(20) translate(-50%, -50%);
            opacity: 1;
            transition: 0s;
        }

        .button-secondary {
            background-color: #3B4455; /* ‡§ó‡•ç‡§∞‡•á-‡§®‡•Ä‡§≤‡§æ */
            color: #E0E7FF;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            font-weight: 700;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            border: none;
        }
        .button-secondary:hover {
            transform: translateY(-2px);
            background-color: #4A5568;
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .offer-card {
            background-color: #2D3748; /* ‡§ó‡§π‡§∞‡§æ ‡§ó‡•ç‡§∞‡•á */
            border-radius: 1.25rem; /* ‡§Ö‡§ß‡§ø‡§ï ‡§ó‡•ã‡§≤ ‡§ï‡•ã‡§®‡•á */
            padding: 1.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }
        .offer-card:hover {
            border-color: #FFB86B; /* ‡§®‡§æ‡§∞‡§Ç‡§ó‡•Ä ‡§π‡§æ‡§á‡§≤‡§æ‡§á‡§ü */
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        
        .modal-backdrop {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 40;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-backdrop.active {
            opacity: 1;
            visibility: visible;
        }
        .modal {
            background-color: #1A202C;
            padding: 2.5rem;
            border-radius: 1.5rem;
            width: 90%;
            max-width: 400px;
            transform: translateY(20px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .modal-backdrop.active .modal {
            transform: translateY(0);
            opacity: 1;
        }

        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #48bb78; /* ‡§π‡§∞‡§æ */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            z-index: 100;
            opacity: 0;
            transition: opacity 0.5s ease, transform 0.5s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }
        .login-input {
            background-color: #2D3748; /* ‡§ó‡§π‡§∞‡§æ ‡§ó‡•ç‡§∞‡•á */
            border: 1px solid #4A5568; /* ‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§ó‡•ç‡§∞‡•á */
            color: #E0E7FF;
            border-radius: 0.75rem;
            padding: 0.75rem 1rem;
            width: 100%;
            transition: all 0.3s ease;
        }
        .login-input::placeholder {
            color: #A0AEC0; /* ‡§π‡§≤‡•ç‡§ï‡§æ ‡§ó‡•ç‡§∞‡•á */
        }
        .login-input:focus {
            outline: none;
            border-color: #FF6B6B; /* ‡§≤‡§æ‡§≤ */
            box-shadow: 0 0 0 4px rgba(255, 107, 107, 0.3);
            background-color: #3B4455;
        }
        .header-bg {
            background-color: #2D3748;
            border-radius: 1.5rem;
            padding: 1rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .coin-display {
            background-color: #2D3748;
            padding: 0.75rem 1.25rem;
            border-radius: 9999px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.15);
        }
    </style>
</head>
<body>
    <div class="app-wrapper">
        <main>
            <!-- ‡§≤‡•ã‡§°‡§ø‡§Ç‡§ó ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® -->
            <div id="loading-screen" class="screen active justify-center items-center p-8">
                <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-yellow-400"></div>
                <h1 class="text-3xl font-bold mt-8 text-white">‡§ê‡§™ ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...</h1>
            </div>

            <!-- ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§≤‡•â‡§ó‡§ø‡§® ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® -->
            <div id="main-login-screen" class="screen flex-col justify-center items-center p-8 space-y-6 text-center">
                <h2 class="text-4xl font-bold text-white mb-8">BISHNOI 29 ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à! üíé</h2>
                <button id="email-signup-btn" class="button-primary w-full max-w-sm">‡§∏‡§æ‡§á‡§® ‡§Ö‡§™ ‡§ï‡§∞‡•á‡§Ç (‡§à‡§Æ‡•á‡§≤/‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°)</button>
                <button id="email-login-btn" class="button-secondary w-full max-w-sm">‡§≤‡•â‡§ó ‡§á‡§® ‡§ï‡§∞‡•á‡§Ç (‡§à‡§Æ‡•á‡§≤/‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°)</button>
                <button id="continue-as-guest-btn" class="button-secondary w-full max-w-sm">‡§ó‡•á‡§∏‡•ç‡§ü ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§ñ‡•á‡§Ç</button>
            </div>
            
            <!-- ‡§ó‡•á‡§∏‡•ç‡§ü ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® -->
            <div id="guest-name-screen" class="screen flex-col justify-center items-center p-8 space-y-6">
                <button class="back-btn absolute top-6 left-6 p-3 rounded-full hover:bg-gray-700 text-white"><i data-lucide="arrow-left"></i></button>
                <h2 class="text-3xl font-bold text-white">‡§Ü‡§™‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?</h2>
                <input type="text" id="guest-name-input" placeholder="‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" class="login-input w-full max-w-sm text-lg text-center">
                <button id="create-guest-user-btn" class="button-primary w-full max-w-sm">‡§Ü‡§ó‡•á ‡§¨‡§¢‡§º‡•á‡§Ç</button>
            </div>

            <!-- ‡§à‡§Æ‡•á‡§≤ ‡§∏‡§æ‡§á‡§® ‡§Ö‡§™ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® -->
            <div id="email-signup-screen" class="screen flex-col justify-center items-center p-8 space-y-4">
                <button class="back-btn absolute top-6 left-6 p-3 rounded-full hover:bg-gray-700 text-white"><i data-lucide="arrow-left"></i></button>
                <h2 class="text-3xl font-bold text-white mb-4">‡§ñ‡§æ‡§§‡§æ ‡§¨‡§®‡§æ‡§è‡§Å</h2>
                <input type="text" id="signup-name-input" placeholder="‡§Ö‡§™‡§®‡§æ ‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" class="login-input w-full max-w-sm">
                <input type="email" id="signup-email-input" placeholder="‡§à‡§Æ‡•á‡§≤ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" class="login-input w-full max-w-sm">
                <input type="password" id="signup-password-input" placeholder="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç (‡§®‡•ç‡§Ø‡•Ç‡§®‡§§‡§Æ 6 ‡§Ö‡§ï‡•ç‡§∑‡§∞)" class="login-input w-full max-w-sm">
                <button id="signup-btn" class="button-primary w-full max-w-sm mt-4">‡§∏‡§æ‡§á‡§® ‡§Ö‡§™ ‡§ï‡§∞‡•á‡§Ç</button>
            </div>
            
            <!-- ‡§à‡§Æ‡•á‡§≤ ‡§≤‡•â‡§ó‡§ø‡§® ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® -->
            <div id="email-login-screen" class="screen flex-col justify-center items-center p-8 space-y-4">
                <button class="back-btn absolute top-6 left-6 p-3 rounded-full hover:bg-gray-700 text-white"><i data-lucide="arrow-left"></i></button>
                <h2 class="text-3xl font-bold text-white mb-4">‡§≤‡•â‡§ó ‡§á‡§® ‡§ï‡§∞‡•á‡§Ç</h2>
                <input type="email" id="login-email-input" placeholder="‡§à‡§Æ‡•á‡§≤ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" class="login-input w-full max-w-sm">
                <input type="password" id="login-password-input" placeholder="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" class="login-input w-full max-w-sm">
                <button id="email-login-submit-btn" class="button-primary w-full max-w-sm mt-4">‡§≤‡•â‡§ó ‡§á‡§® ‡§ï‡§∞‡•á‡§Ç</button>
            </div>

            <!-- ‡§π‡•ã‡§Æ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® -->
            <div id="home-screen" class="screen p-6 space-y-6">
                <header class="flex justify-between items-center header-bg">
                    <h1 id="welcome-message" class="text-2xl font-bold">‡§®‡§Æ‡§∏‡•ç‡§§‡•á, ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ!</h1>
                    <div class="coin-display">
                        <i data-lucide="gem" class="text-yellow-400"></i>
                        <span id="coin-balance" class="font-bold text-lg">0.00</span>
                    </div>
                </header>

                <div class="bg-gray-800 p-4 rounded-xl space-y-2 shadow-lg">
                    <p class="text-sm text-gray-400">‡§Ü‡§™‡§ï‡•Ä ‡§Ø‡•Ç‡§ú‡§∞ ‡§Ü‡§à‡§°‡•Ä</p>
                    <div class="flex items-center justify-between gap-4">
                        <p id="user-id-display" class="font-mono text-sm break-all bg-gray-900 p-2 rounded-lg flex-grow"></p>
                        <button id="copy-id-btn" class="button-secondary px-3 py-2 rounded-lg">‡§ï‡•â‡§™‡•Ä</button>
                    </div>
                </div>

                <div class="grid grid-cols-1 gap-4 pt-4">
                    <button id="earn-btn" class="button-primary py-4 text-lg flex items-center justify-center gap-3">
                        <i data-lucide="dollar-sign"></i>
                        <span>‡§´‡•ç‡§∞‡•Ä ‡§ï‡•â‡§á‡§Ç‡§∏ ‡§™‡§æ‡§è‡§Ç</span>
                    </button>
                    <button id="withdraw-btn" class="button-secondary py-4 text-lg flex items-center justify-center gap-3">
                        <i data-lucide="send"></i>
                        <span>‡§®‡§ø‡§ï‡§æ‡§≤‡•á‡§Ç (Withdraw)</span>
                    </button>
                    <button id="tasks-btn" class="button-secondary py-4 text-lg flex items-center justify-center gap-3">
                        <i data-lucide="clipboard-list"></i>
                        <span>‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§î‡§∞ ‡§ë‡§´‡§º‡§∞</span>
                    </button>
                </div>
                 <button id="logout-btn" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-xl mt-4 shadow-lg transition-all duration-300">‡§≤‡•â‡§ó ‡§Ü‡§â‡§ü</button>
            </div>

            <!-- ‡§ï‡•â‡§á‡§Ç‡§∏ ‡§ï‡§Æ‡§æ‡§è‡§Ç ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® -->
            <div id="earn-screen" class="screen p-6 space-y-6">
                <header class="flex items-center">
                    <button class="back-btn p-2 rounded-full hover:bg-gray-700 text-white"><i data-lucide="arrow-left"></i></button>
                    <h1 class="text-xl font-bold mx-auto">‡§ï‡•â‡§á‡§Ç‡§∏ ‡§ï‡§Æ‡§æ‡§è‡§Ç</h1>
                </header>
                <div class="bg-blue-700 p-4 rounded-xl text-white text-center font-bold shadow-lg animate-pulse">
                    <p>‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§ 5 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§Æ‡•á‡§Ç ‡§ï‡•â‡§á‡§® ‡§Ü‡§™‡§ï‡•á ‡§ñ‡§æ‡§§‡•á ‡§Æ‡•á‡§Ç ‡§ú‡•Å‡§°‡§º ‡§ú‡§æ‡§è‡§Ç‡§ó‡•á‡•§</p>
                </div>
                <div id="banners-container" class="space-y-6">
                    <div class="p-2 bg-gray-800 rounded-lg shadow-md">
                        <p class="text-center text-xs text-gray-500 mb-1">‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® 1</p>
                        <script async="async" data-cfasync="false" src="//pl27209153.profitableratecpm.com/4e2d6d16c1332f7c73b28bca760b3ec9/invoke.js"></script>
                        <div id="container-4e2d6d16c1332f7c73b28bca760b3ec9"></div>
                    </div>
                     <div class="p-2 bg-gray-800 rounded-lg shadow-md">
                        <p class="text-center text-xs text-gray-500 mb-1">‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® 2</p>
                        <script type="text/javascript">
                            atOptions = {
                                'key' : '0d15173de61272c3e2bb15f8677bb5c5',
                                'format' : 'iframe',
                                'height' : 250,
                                'width' : 300,
                                'params' : {}
                            };
                        </script>
                        <script type="text/javascript" src="//www.highperformanceformat.com/0d15173de61272c3e2bb15f8677bb5c5/invoke.js"></script>
                    </div>
                    <!-- ‡§∞‡§ø‡§µ‡•â‡§∞‡•ç‡§°‡•á‡§° ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§™‡•ç‡§≤‡•á‡§∏‡§π‡•ã‡§≤‡•ç‡§°‡§∞ -->
                    <button id="rewarded-video-btn" class="button-primary w-full py-3 text-lg flex items-center justify-center gap-3">
                        <i data-lucide="monitor-play"></i>
                        <span>‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§¶‡•á‡§ñ‡•á‡§Ç ‡§î‡§∞ ‡§ï‡•â‡§á‡§Ç‡§∏ ‡§ï‡§Æ‡§æ‡§è‡§Ç</span>
                    </button>
                </div>
            </div>

            <!-- ‡§®‡§ø‡§ï‡§æ‡§∏‡•Ä ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® -->
            <div id="withdraw-screen" class="screen p-6 space-y-6">
                <header class="flex items-center">
                    <button class="back-btn p-2 rounded-full hover:bg-gray-700 text-white"><i data-lucide="arrow-left"></i></button>
                    <h1 class="text-xl font-bold mx-auto">‡§®‡§ø‡§ï‡§æ‡§≤‡•á‡§Ç</h1>
                </header>
                <div class="grid grid-cols-1 gap-4 pt-8">
                    <button class="withdraw-option-btn button-primary py-8 text-2xl" data-game="Google Play">
                        Google Play Redeem Code
                    </button>
                    <button class="withdraw-option-btn button-secondary py-8 text-2xl" data-game="Amazon">
                        Amazon ‡§ó‡§ø‡§´‡•ç‡§ü ‡§ï‡§æ‡§∞‡•ç‡§°
                    </button>
                </div>
            </div>
            
            <!-- ‡§ë‡§´‡§∞ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® -->
            <div id="offer-screen" class="screen p-6 space-y-6">
                 <header class="flex items-center">
                    <button class="back-btn p-2 rounded-full hover:bg-gray-700 text-white"><i data-lucide="arrow-left"></i></button>
                    <h1 id="offer-title" class="text-xl font-bold mx-auto">‡§ë‡§´‡§∞</h1>
                </header>
                <div id="offers-container" class="grid grid-cols-1 md:grid-cols-2 gap-4 pt-4">
                </div>
            </div>

            <!-- ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® (‡§®‡§Ø‡§æ) -->
            <div id="tasks-screen" class="screen p-6 space-y-6">
                <header class="flex items-center">
                    <button class="back-btn p-2 rounded-full hover:bg-gray-700 text-white"><i data-lucide="arrow-left"></i></button>
                    <h1 class="text-xl font-bold mx-auto">‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§î‡§∞ ‡§ë‡§´‡§º‡§∞</h1>
                </header>
                <div class="bg-purple-700 p-4 rounded-xl text-white text-center font-bold shadow-lg">
                    <p>‡§Ø‡§π‡§æ‡§Ç ‡§î‡§∞ ‡§ï‡•â‡§á‡§Ç‡§∏ ‡§ï‡§Æ‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∞‡•ã‡§Æ‡§æ‡§Ç‡§ö‡§ï ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§™‡•Ç‡§∞‡•á ‡§ï‡§∞‡•á‡§Ç!</p>
                </div>
                <div class="grid grid-cols-1 gap-4">
                    <div class="offer-card flex items-center gap-4">
                        <i data-lucide="download" class="text-green-400 text-3xl"></i>
                        <div>
                            <h3 class="font-bold text-lg">‡§ê‡§™ ‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç</h3>
                            <p class="text-gray-400 text-sm">‡§®‡§è ‡§ê‡§™‡•ç‡§∏ ‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤ ‡§ï‡§∞‡§ï‡•á 50-200 ‡§ï‡•â‡§á‡§Ç‡§∏ ‡§ï‡§Æ‡§æ‡§è‡§Ç‡•§</p>
                        </div>
                        <button class="ml-auto button-primary px-4 py-2 text-sm">‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç</button>
                    </div>
                     <div class="offer-card flex items-center gap-4">
                        <i data-lucide="message-square" class="text-blue-400 text-3xl"></i>
                        <div>
                            <h3 class="font-bold text-lg">‡§∏‡§∞‡•ç‡§µ‡•á‡§ï‡•ç‡§∑‡§£ ‡§™‡•Ç‡§∞‡§æ ‡§ï‡§∞‡•á‡§Ç</h3>
                            <p class="text-gray-400 text-sm">‡§§‡•ç‡§µ‡§∞‡§ø‡§§ ‡§∏‡§∞‡•ç‡§µ‡•á‡§ï‡•ç‡§∑‡§£‡•ã‡§Ç ‡§ï‡§æ ‡§ú‡§µ‡§æ‡§¨ ‡§¶‡•á‡§ï‡§∞ 30-100 ‡§ï‡•â‡§á‡§Ç‡§∏ ‡§ï‡§Æ‡§æ‡§è‡§Ç‡•§</p>
                        </div>
                        <button class="ml-auto button-primary px-4 py-2 text-sm">‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- ‡§Æ‡•ã‡§°‡§≤ ‡§î‡§∞ ‡§ü‡•ã‡§∏‡•ç‡§ü -->
    <div id="modal-container" class="modal-backdrop hidden">
        <div id="uid-modal" class="modal space-y-4 hidden">
            <h3 id="uid-modal-title" class="text-2xl font-bold text-center"></h3>
            <input type="email" id="uid-input" placeholder="‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ ‡§à‡§Æ‡•á‡§≤/UID ‡§Ø‡§π‡§æ‡§Ç ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-red-500 text-white">
            <div class="flex gap-4">
                <button id="uid-cancel-btn" class="flex-1 button-secondary">‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</button>
                <button id="uid-submit-btn" class="flex-1 button-primary">‡§ú‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç</button>
            </div>
        </div>
        <div id="message-modal" class="modal space-y-4 text-center hidden">
             <h3 id="message-modal-title" class="text-2xl font-bold">‡§∏‡§Ç‡§¶‡•á‡§∂</h3>
             <p id="message-modal-text" class="text-gray-300 mt-2"></p>
             <button id="message-modal-ok-btn" class="w-full button-primary mt-4">‡§†‡•Ä‡§ï ‡§π‡•à</button>
        </div>
    </div>
    <div id="toast-container"></div>

    <script type="module">
        // Firebase ‡§Æ‡•â‡§°‡•ç‡§Ø‡•Ç‡§≤ ‡§Ü‡§Ø‡§æ‡§§ ‡§ï‡§∞‡•á‡§Ç
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-auth.js";
        import { getFirestore, doc, setDoc, updateDoc, increment, collection, addDoc, serverTimestamp, onSnapshot, getDoc } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js";

        // --- Firebase ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞‡•á‡§∂‡§® ‡§î‡§∞ ‡§ó‡•ç‡§≤‡•ã‡§¨‡§≤ ‡§µ‡•à‡§∞‡§ø‡§è‡§¨‡§≤ ---
        const firebaseConfig = {
            apiKey: "AIzaSyAkkS8wmSnkQfTGydbPe-i1C7mO0w5z8j4",
            authDomain: "jai-shree-ram-a9e73.firebaseapp.com",
            projectId: "jai-shree-ram-a9e73",
            storageBucket: "jai-shree-ram-a9e73.appspot.com",
            messagingSenderId: "557868202170",
            appId: "1:557868202170:web:a2627a26b7ee452075aa83"
        };
        
        let app, db, auth, currentUser, userData, userId, unsubscribeUser;
        let screenHistory = [];
        let currentOffer = null;

        // --- DOM ‡§è‡§≤‡§ø‡§Æ‡•á‡§Ç‡§ü‡•ç‡§∏ ---
        const allScreens = document.querySelectorAll('.screen');
        const modalContainer = document.getElementById('modal-container');

        // --- ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§è‡§™‡•ç‡§≤‡§ø‡§ï‡•á‡§∂‡§® ‡§´‡§º‡•ç‡§≤‡•ã ‡§î‡§∞ UI ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® ---
        /**
         * ‡§∏‡§≠‡•Ä ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§ï‡•ã ‡§õ‡•Å‡§™‡§æ‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§¶‡§ø‡§è ‡§ó‡§è ID ‡§µ‡§æ‡§≤‡•Ä ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§ï‡•ã ‡§¶‡§ø‡§ñ‡§æ‡§§‡§æ ‡§π‡•à‡•§
         * ‡§á‡§∏‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§∏‡•ç‡§≤‡§æ‡§á‡§° ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§ú‡•Ä‡§∂‡§® ‡§≠‡•Ä ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•à‡•§
         * @param {string} screenId ‡§¶‡§ø‡§ñ‡§æ‡§®‡•á ‡§µ‡§æ‡§≤‡•Ä ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§ï‡•Ä ID‡•§
         * @param {boolean} isNav True ‡§Ø‡§¶‡§ø ‡§Ø‡§π ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§®‡•á‡§µ‡§ø‡§ó‡•á‡§∂‡§® ‡§π‡•à, False ‡§Ø‡§¶‡§ø ‡§è‡§ï ‡§â‡§™-‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§π‡•à‡•§
         * @param {boolean} reverse True ‡§Ø‡§¶‡§ø ‡§™‡•Ä‡§õ‡•á ‡§ï‡•Ä ‡§ì‡§∞ ‡§®‡•á‡§µ‡§ø‡§ó‡•á‡§ü ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç‡•§
         */
        function showScreen(screenId, isNav = false, reverse = false) {
            console.log(`Navigating to: ${screenId}, isNav: ${isNav}, reverse: ${reverse}`);
            const currentActive = document.querySelector('.screen.active');
            const targetScreen = document.getElementById(screenId);

            if (currentActive && currentActive.id === screenId) return;

            if (currentActive && !isNav) {
                screenHistory.push(currentActive.id);
            } else if (isNav && !reverse) {
                screenHistory = [];
            }

            if (currentActive) {
                currentActive.classList.remove('active');
                if (reverse) {
                    currentActive.classList.add('next');
                } else {
                    currentActive.classList.add('prev');
                }
            }

            if (targetScreen) {
                targetScreen.classList.remove('prev', 'next');
                targetScreen.classList.add('active');
                if (reverse) {
                    targetScreen.style.transform = 'translateX(-100%)';
                    setTimeout(() => targetScreen.style.transform = 'translateX(0)', 10);
                } else {
                    targetScreen.style.transform = 'translateX(100%)';
                    setTimeout(() => targetScreen.style.transform = 'translateX(0)', 10);
                }
            }
            
            lucide.createIcons();
        }

        /**
         * ‡§á‡§§‡§ø‡§π‡§æ‡§∏ ‡§Æ‡•á‡§Ç ‡§™‡§ø‡§õ‡§≤‡•Ä ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§™‡§∞ ‡§®‡•á‡§µ‡§ø‡§ó‡•á‡§ü ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§
         */
        function goBack() {
            if (screenHistory.length > 0) {
                const lastScreenId = screenHistory.pop();
                showScreen(lastScreenId, false, true);
            } else {
                if (currentUser) {
                    showScreen('home-screen', true);
                } else {
                    showScreen('main-login-screen', true);
                }
            }
        }
        
        /**
         * ‡§è‡§ï ‡§ü‡•ã‡§∏‡•ç‡§ü ‡§®‡•ã‡§ü‡§ø‡§´‡§ø‡§ï‡•á‡§∂‡§® ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§
         * @param {string} message ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§ø‡§§ ‡§ï‡§∞‡§®‡•á ‡§µ‡§æ‡§≤‡§æ ‡§∏‡§Ç‡§¶‡•á‡§∂‡•§
         * @param {number} duration ‡§Æ‡§ø‡§≤‡•Ä‡§∏‡•á‡§ï‡§Ç‡§° ‡§Æ‡•á‡§Ç ‡§Ö‡§µ‡§ß‡§ø‡•§
         * @param {string} type 'success', 'error', 'info'
         */
        function showToast(message, duration = 3000, type = 'info') {
            const toastId = `toast-${Date.now()}`;
            const toast = document.createElement('div');
            toast.id = toastId;
            toast.className = `toast ${type === 'success' ? 'bg-green-500' : type === 'error' ? 'bg-red-500' : 'bg-blue-500'}`;
            toast.textContent = message;
            document.getElementById('toast-container').appendChild(toast);

            setTimeout(() => {
                toast.classList.add('show');
            }, 10);

            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    toast.remove();
                }, 500);
            }, duration);
        }
        
        /**
         * ‡§è‡§ï ‡§ï‡§∏‡•ç‡§ü‡§Æ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§è‡§ï ‡§Æ‡•ã‡§°‡§≤ ‡§¶‡§ø‡§ñ‡§æ‡§§‡§æ ‡§π‡•à‡•§
         * @param {string} title ‡§Æ‡•ã‡§°‡§≤ ‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï‡•§
         * @param {string} text ‡§Æ‡•ã‡§°‡§≤ ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä‡•§
         * @param {function} onOk OK ‡§¨‡§ü‡§® ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡§®‡•á ‡§™‡§∞ ‡§ï‡•â‡§≤ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§®‡•§
         */
        function showMessageModal(title, text, onOk) {
            document.getElementById('message-modal-title').textContent = title;
            document.getElementById('message-modal-text').textContent = text;
            modalContainer.classList.add('active');
            document.getElementById('message-modal').classList.remove('hidden');
            document.getElementById('uid-modal').classList.add('hidden');

            const okButton = document.getElementById('message-modal-ok-btn');
            okButton.onclick = () => {
                hideModals();
                if (onOk) onOk();
            };
        }

        /**
         * ‡§∏‡§≠‡•Ä ‡§Æ‡•ã‡§°‡§≤‡•ã‡§Ç ‡§ï‡•ã ‡§õ‡•Å‡§™‡§æ‡§§‡§æ ‡§π‡•à‡•§
         */
        function hideModals() {
            modalContainer.classList.remove('active');
            document.getElementById('uid-modal').classList.add('hidden');
            document.getElementById('message-modal').classList.add('hidden');
        }

        // --- Firebase ‡§á‡§®‡§ø‡§∂‡§ø‡§Ø‡§≤‡§æ‡§á‡§ú‡§º‡•á‡§∂‡§® ‡§î‡§∞ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡•Ä‡§ï‡§∞‡§£ ---
        async function initializeFirebase() {
            try {
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                
                onAuthStateChanged(auth, async (user) => {
                    if (user) {
                        currentUser = user;
                        userId = user.uid;
                        await setupUser(user.uid, user.displayName || user.email || "Guest");
                    } else {
                        currentUser = null;
                        userId = null;
                        userData = null;
                        if(unsubscribeUser) unsubscribeUser();
                        showScreen('main-login-screen');
                    }
                });
            } catch (error) {
                console.error("Firebase Init Error:", error);
                document.getElementById('loading-screen').innerHTML = `
                    <p class="text-red-500 text-center text-lg">‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§∏‡•á ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ ‡§á‡§Ç‡§ü‡§∞‡§®‡•á‡§ü ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§ú‡§æ‡§Ç‡§ö‡•á‡§Ç‡•§</p>
                    <p class="text-gray-400 text-center text-sm mt-2">(${error.message})</p>
                `;
            }
        }

        /**
         * ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§°‡•á‡§ü‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï ‡§∏‡§Æ‡§Ø ‡§∂‡•ç‡§∞‡•ã‡§§‡§æ ‡§∏‡•á‡§ü ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§
         * @param {string} uid ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ID‡•§
         * @param {string} userName ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ‡•§
         */
        async function setupUser(uid, userName) {
            const userRef = doc(db, "users", uid); 

            if(unsubscribeUser) unsubscribeUser();

            unsubscribeUser = onSnapshot(userRef, async (docSnap) => {
                if (docSnap.exists()) {
                    userData = docSnap.data();
                    updateUI();
                    showScreen('home-screen');
                } else {
                    console.warn(`User document for ${uid} does not exist yet. Creating...`);
                    // ‡§Ø‡§¶‡§ø ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º ‡§Æ‡•å‡§ú‡•Ç‡§¶ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à, ‡§§‡•ã ‡§â‡§∏‡•á ‡§¨‡§®‡§æ‡§è‡§Ç‡•§
                    // ‡§Ø‡§π ‡§®‡§è ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ‡§ì‡§Ç ‡§ï‡•ã ‡§π‡•à‡§Ç‡§°‡§≤ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à ‡§ú‡•ã ‡§Ö‡§≠‡•Ä ‡§∏‡§æ‡§á‡§® ‡§Ö‡§™ ‡§π‡•Å‡§è ‡§π‡•à‡§Ç‡•§
                    const initialUserData = {
                        name: userName,
                        uid: uid,
                        coins: 0,
                        createdAt: serverTimestamp(),
                    };

                    try {
                        await setDoc(userRef, initialUserData);
                        console.log("User document created.");
                        // ‡§Ø‡•Ç‡§Ü‡§à ‡§ï‡•ã ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§°‡•á‡§ü‡§æ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç (‡§∂‡§æ‡§Ø‡§¶ onSnapshot ‡§á‡§∏‡•á ‡§∏‡•ç‡§µ‡§Ø‡§Ç ‡§π‡•à‡§Ç‡§°‡§≤ ‡§ï‡§∞‡•á‡§ó‡§æ, ‡§≤‡•á‡§ï‡§ø‡§® ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è)
                        const newDocSnap = await getDoc(userRef);
                        if (newDocSnap.exists()) {
                            userData = newDocSnap.data();
                            updateUI();
                            showScreen('home-screen');
                        }
                    } catch (error) {
                        console.error("Error creating user document:", error);
                        showMessageModal("Error", "‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§™‡•ç‡§∞‡•ã‡§´‡§º‡§æ‡§á‡§≤ ‡§¨‡§®‡§æ‡§®‡•á ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§´‡§≤‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§");
                    }
                }
            }, (error) => {
                console.error("Error in user snapshot listener:", error);
                showMessageModal("‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø", "‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§°‡•á‡§ü‡§æ ‡§∏‡§ø‡§Ç‡§ï ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§æ‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§");
            });
        }

        /**
         * ‡§Ø‡•Ç‡§Ü‡§à ‡§ï‡•ã ‡§®‡§µ‡•Ä‡§®‡§§‡§Æ ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§°‡•á‡§ü‡§æ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§
         */
        function updateUI() {
            if (!userData) return;
            document.getElementById('welcome-message').textContent = `‡§®‡§Æ‡§∏‡•ç‡§§‡•á, ${userData.name}!`;
            document.getElementById('coin-balance').textContent = parseFloat(userData.coins || 0).toFixed(2);
            document.getElementById('user-id-display').textContent = userData.uid;
        }

        // --- ‡§≤‡•â‡§ó‡§ø‡§® ‡§î‡§∞ ‡§∏‡§æ‡§á‡§® ‡§Ö‡§™ ‡§π‡•à‡§Ç‡§°‡§≤‡§∞‡•ç‡§∏ ---
        async function handleGuestSignIn() {
            const name = document.getElementById('guest-name-input').value.trim();
            if (!name) {
                showToast("‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§", 3000, 'error');
                return;
            }
            try {
                const userCredential = await signInAnonymously(auth);
                // setupUser ‡§ï‡•ã ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç
                await setupUser(userCredential.user.uid, name);
            } catch (error) {
                console.error("‡§ó‡•á‡§∏‡•ç‡§ü ‡§∏‡§æ‡§á‡§®-‡§á‡§® ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø:", error);
                showMessageModal("‡§§‡•ç‡§∞‡•Å‡§ü‡§ø", "‡§ó‡•á‡§∏‡•ç‡§ü ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§∏‡§æ‡§á‡§® ‡§á‡§® ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§æ‡•§", null, 'error');
            }
        }

        async function handleEmailSignup() {
            const name = document.getElementById('signup-name-input').value.trim();
            const email = document.getElementById('signup-email-input').value.trim();
            const password = document.getElementById('signup-password-input').value.trim();

            if (!name || !email || !password) {
                showToast("‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§≠‡•Ä ‡§´‡§º‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç‡•§", 3000, 'error'); return;
            }
            if (password.length < 6) {
                showToast("‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ 6 ‡§µ‡§∞‡•ç‡§£‡•ã‡§Ç ‡§ï‡§æ ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è‡•§", 3000, 'error'); return;
            }

            try {
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                // setupUser ‡§ï‡•ã ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç
                await setupUser(userCredential.user.uid, name);
            } catch (error) {
                console.error("‡§∏‡§æ‡§á‡§® ‡§Ö‡§™ ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø:", error.code, error.message);
                let errorMessage = `‡§ñ‡§æ‡§§‡§æ ‡§¨‡§®‡§æ‡§®‡•á ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§´‡§≤‡§§‡§æ: ${error.code}`;
                if (error.code === 'auth/email-already-in-use') {
                    errorMessage = "‡§Ø‡§π ‡§à‡§Æ‡•á‡§≤ ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§â‡§™‡§Ø‡•ã‡§ó ‡§Æ‡•á‡§Ç ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§≤‡•â‡§ó ‡§á‡§® ‡§ï‡§∞‡•á‡§Ç ‡§Ø‡§æ ‡§ï‡§ø‡§∏‡•Ä ‡§Ö‡§®‡•ç‡§Ø ‡§à‡§Æ‡•á‡§≤ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç‡•§";
                } else if (error.code === 'auth/weak-password') {
                     errorMessage = "‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¨‡§π‡•Å‡§§ ‡§ï‡§Æ‡§ú‡•ã‡§∞ ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§ï ‡§Æ‡§ú‡§¨‡•Ç‡§§ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§ö‡•Å‡§®‡•á‡§Ç‡•§";
                } else if (error.code === 'auth/invalid-email') {
                     errorMessage = "‡§Ö‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§à‡§Æ‡•á‡§≤ ‡§™‡•ç‡§∞‡§æ‡§∞‡•Ç‡§™‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§ï ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§à‡§Æ‡•á‡§≤ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§";
                }
                showMessageModal("‡§∏‡§æ‡§á‡§® ‡§Ö‡§™ ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø", errorMessage, null, 'error');
            }
        }

        async function handleEmailLogin() {
            const email = document.getElementById('login-email-input').value.trim();
            const password = document.getElementById('login-password-input').value.trim();
            if (!email || !password) {
                showToast("‡§ï‡•É‡§™‡§Ø‡§æ ‡§à‡§Æ‡•á‡§≤ ‡§î‡§∞ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§", 3000, 'error'); return;
            }
            try {
                await signInWithEmailAndPassword(auth, email, password);
                // onAuthStateChanged ‡§∏‡•á‡§ü‡§Ö‡§™User ‡§ï‡•ã ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§ó‡§æ
            } catch (error) {
                console.error("‡§≤‡•â‡§ó‡§ø‡§® ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø:", error.code, error.message);
                let errorMessage = `‡§≤‡•â‡§ó ‡§á‡§® ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§´‡§≤‡§§‡§æ: ${error.code}`;
                 if (error.code === 'auth/invalid-credential' || error.code === 'auth/wrong-password' || error.code === 'auth/user-not-found') {
                    errorMessage = "‡§Ö‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§à‡§Æ‡•á‡§≤ ‡§Ø‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§";
                }
                showMessageModal("‡§≤‡•â‡§ó‡§ø‡§® ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø", errorMessage, null, 'error');
            }
        }

        function handleLogout() {
            signOut(auth).catch(error => {
                console.error("‡§≤‡•â‡§ó ‡§Ü‡§â‡§ü ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø:", error);
                showMessageModal("‡§§‡•ç‡§∞‡•Å‡§ü‡§ø", "‡§≤‡•â‡§ó ‡§Ü‡§â‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§æ‡•§", null, 'error');
            });
        }
        
        // --- ‡§ï‡•â‡§á‡§® ‡§ï‡§Æ‡§æ‡§®‡•á ‡§ï‡§æ ‡§≤‡•â‡§ú‡§ø‡§ï ---
        async function addCoins(value = 0.5) {
            if (!userId) {
                showMessageModal("‡§§‡•ç‡§∞‡•Å‡§ü‡§ø", "‡§ï‡•â‡§á‡§Ç‡§∏ ‡§ï‡§æ ‡§¶‡§æ‡§µ‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§™‡§ï‡•ã ‡§≤‡•â‡§ó ‡§á‡§® ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è‡•§", null, 'error');
                return;
            }

            const userRef = doc(db, "users", userId); 
            try {
                await updateDoc(userRef, {
                    coins: increment(value)
                });
                showMessageModal("‡§∏‡§´‡§≤‡§§‡§æ!", `‡§Ü‡§™‡§ï‡•á ‡§ñ‡§æ‡§§‡•á ‡§Æ‡•á‡§Ç +${value.toFixed(2)} ‡§ï‡•â‡§á‡§® ‡§ú‡•ã‡§°‡§º ‡§¶‡§ø‡§è ‡§ó‡§è ‡§π‡•à‡§Ç‡•§`, () => {
                    hideModals();
                    showScreen('home-screen', true);
                }, 'success');

            } catch (error) {
                console.error("‡§ï‡•â‡§á‡§Ç‡§∏ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø:", error);
                showToast("‡§ï‡•â‡§á‡§Ç‡§∏ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§", 3000, 'error');
            }
        }

        // --- ‡§á‡§µ‡•á‡§Ç‡§ü ‡§≤‡§ø‡§∏‡§®‡§∞ ---
        window.addEventListener('load', () => {
            initializeFirebase();
        });

        document.querySelectorAll('.back-btn').forEach(btn => btn.addEventListener('click', goBack));
        
        document.getElementById('email-signup-btn').addEventListener('click', () => showScreen('email-signup-screen'));
        document.getElementById('email-login-btn').addEventListener('click', () => showScreen('email-login-screen'));
        document.getElementById('continue-as-guest-btn').addEventListener('click', () => showScreen('guest-name-screen'));
        
        document.getElementById('create-guest-user-btn').addEventListener('click', handleGuestSignIn);
        document.getElementById('signup-btn').addEventListener('click', handleEmailSignup);
        document.getElementById('email-login-submit-btn').addEventListener('click', handleEmailLogin);

        document.getElementById('copy-id-btn').addEventListener('click', async () => {
            if(!userData || !userData.uid) return;
            const textToCopy = userData.uid;
            
            try {
                await navigator.clipboard.writeText(textToCopy);
                showToast("‡§Ø‡•Ç‡§ú‡§∞ ID ‡§ï‡•â‡§™‡•Ä ‡§ï‡•Ä ‡§ó‡§à!", 3000, 'success');
            } catch (err) {
                console.warn("‡§ï‡•ç‡§≤‡§ø‡§™‡§¨‡•ã‡§∞‡•ç‡§° API ‡§µ‡§ø‡§´‡§≤, ‡§´‡•â‡§≤‡§¨‡•à‡§ï ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à‡•§ ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø:", err);
                const textArea = document.createElement("textarea");
                textArea.value = textToCopy;
                textArea.style.position = "fixed";
                textArea.style.top = "-9999px";
                textArea.style.left = "-9999px";
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    document.execCommand('copy');
                    showToast("‡§Ø‡•Ç‡§ú‡§∞ ID ‡§ï‡•â‡§™‡•Ä ‡§ï‡•Ä ‡§ó‡§à!", 3000, 'success');
                } catch (execErr) {
                    console.error('‡§´‡•â‡§≤‡§¨‡•à‡§ï ‡§ï‡•â‡§™‡•Ä ‡§µ‡§ø‡§´‡§≤:', execErr);
                    showToast("‡§ï‡•â‡§™‡•Ä ‡§µ‡§ø‡§´‡§≤!", 3000, 'error');
                }
                document.body.removeChild(textArea);
            }
        });

        document.getElementById('earn-btn').addEventListener('click', () => {
            showScreen('earn-screen');
            setTimeout(() => addCoins(0.5), 5000); 
        });
        document.getElementById('withdraw-btn').addEventListener('click', () => showScreen('withdraw-screen'));
        document.getElementById('tasks-btn').addEventListener('click', () => showScreen('tasks-screen'));
        document.getElementById('logout-btn').addEventListener('click', handleLogout);

        document.getElementById('rewarded-video-btn').addEventListener('click', () => {
            showMessageModal("‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§®", "‡§Ø‡§π‡§æ‡§Ç ‡§è‡§ï ‡§∞‡§ø‡§µ‡•â‡§∞‡•ç‡§°‡•á‡§° ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§≤‡•ã‡§° ‡§π‡•ã‡§ó‡§æ‡•§", () => {
                addCoins(2.0);
            }, 'info');
        });
        
        const offers = {
            "Google Play": [
                { coins: 200, redeem: 30, type: "Redeem Code" },
                { coins: 400, redeem: 60, type: "Redeem Code" },
                { coins: 600, redeem: 90, type: "Redeem Code" },
                { coins: 800, redeem: 120, type: "Redeem Code" },
                { coins: 1000, redeem: 150, type: "Redeem Code" },
            ],
            "Amazon": [
                { coins: 300, redeem: 30, type: "Gift Card" },
                { coins: 600, redeem: 60, type: "Gift Card" },
                { coins: 1200, redeem: 120, type: "Gift Card" },
            ]
        };

        document.querySelectorAll('.withdraw-option-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const game = btn.dataset.game;
                const gameOffers = offers[game];
                
                document.getElementById('offer-title').textContent = `${game} ‡§ë‡§´‡§º‡§∞`;
                
                const container = document.getElementById('offers-container');
                container.innerHTML = ''; 
                
                gameOffers.forEach(offer => {
                    const card = document.createElement('div');
                    card.className = 'offer-card text-center';
                    card.innerHTML = `
                        <p class="text-3xl font-bold text-yellow-400">‚Çπ${offer.redeem}</p>
                        <p class="text-lg">${offer.type}</p>
                        <p class="mt-4 bg-gray-900 inline-block px-4 py-1 rounded-full text-sm">${offer.coins} ‡§ï‡•â‡§á‡§Ç‡§∏</p>
                    `;
                    card.addEventListener('click', () => handleOfferClick(offer, game));
                    container.appendChild(card);
                });
                showScreen('offer-screen');
            });
        });
        
        function handleOfferClick(offer, game) {
            if (!userData) {
                showMessageModal("‡§≤‡•â‡§ó ‡§á‡§® ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï", "‡§ë‡§´‡§∞‡•ç‡§∏ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§™‡§ï‡•ã ‡§≤‡•â‡§ó ‡§á‡§® ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è‡•§", null, 'error');
                return;
            }
            if (userData.coins >= offer.coins) {
                currentOffer = { ...offer, game };
                document.getElementById('uid-modal-title').textContent = `${game} ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§™‡§®‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç`;
                document.getElementById('uid-input').placeholder = game === "Google Play" ? "‡§Ö‡§™‡§®‡§æ ‡§à‡§Æ‡•á‡§≤ ‡§Ø‡§π‡§æ‡§Ç ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" : "‡§Ö‡§™‡§®‡§æ ‡§´‡§º‡•ã‡§® ‡§®‡§Ç‡§¨‡§∞/‡§à‡§Æ‡•á‡§≤ ‡§Ø‡§π‡§æ‡§Ç ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç";
                modalContainer.classList.add('active');
                document.getElementById('uid-modal').classList.remove('hidden');
                document.getElementById('message-modal').classList.add('hidden');
            } else {
                showMessageModal("‡§Ö‡§™‡§∞‡•ç‡§Ø‡§æ‡§™‡•ç‡§§ ‡§ï‡•â‡§á‡§Ç‡§∏", "‡§Ü‡§™‡§ï‡•á ‡§™‡§æ‡§∏ ‡§á‡§∏ ‡§ë‡§´‡§∞ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡§∞‡•ç‡§Ø‡§æ‡§™‡•ç‡§§ ‡§ï‡•â‡§á‡§Ç‡§∏ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡§Ç‡•§", null, 'error');
            }
        }
        
        document.getElementById('uid-cancel-btn').addEventListener('click', hideModals);
        
        document.getElementById('uid-submit-btn').addEventListener('click', async () => {
            const detailInput = document.getElementById('uid-input').value.trim();
            if (detailInput === '') {
                showToast("‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§ï ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§", 3000, 'error');
                return;
            }
            
            if (!currentOffer || !userId) {
                showToast("‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: ‡§ë‡§´‡§∞ ‡§Ø‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ID ‡§ó‡§æ‡§Ø‡§¨ ‡§π‡•à‡•§", 3000, 'error');
                return;
            }

            hideModals();
            showToast("‡§Ü‡§™‡§ï‡•á ‡§Ö‡§®‡•Å‡§∞‡•ã‡§ß ‡§™‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§à ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...", 4000, 'info');

            const userRef = doc(db, "users", userId); 
            const withdrawalsRef = collection(db, "withdrawals");

            try {
                if (userData.coins < currentOffer.coins) {
                    showMessageModal("‡§§‡•ç‡§∞‡•Å‡§ü‡§ø", "‡§Ü‡§™‡§ï‡•á ‡§™‡§æ‡§∏ ‡§á‡§∏ ‡§ë‡§´‡§º‡§∞ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡§∞‡•ç‡§Ø‡§æ‡§™‡•ç‡§§ ‡§ï‡•â‡§á‡§Ç‡§∏ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡§Ç‡•§", null, 'error');
                    return;
                }

                await updateDoc(userRef, {
                    coins: increment(-currentOffer.coins)
                });

                await addDoc(withdrawalsRef, {
                    userId: userId,
                    game: currentOffer.game,
                    offer: currentOffer,
                    withdrawalDetail: detailInput,
                    status: "pending",
                    createdAt: serverTimestamp()
                });

                showMessageModal("‡§∏‡§´‡§≤‡§§‡§æ!", `‡§Ü‡§™‡§ï‡§æ ${currentOffer.game} ${currentOffer.type} 24 ‡§ò‡§Ç‡§ü‡•á ‡§ï‡•á ‡§≠‡•Ä‡§§‡§∞ ‡§Ü‡§™‡§ï‡•á ${currentOffer.game === 'Google Play' ? '‡§à‡§Æ‡•á‡§≤' : '‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§ø‡§è ‡§ó‡§è ‡§µ‡§ø‡§µ‡§∞‡§£'} ‡§™‡§∞ ‡§≠‡•á‡§ú ‡§¶‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§è‡§ó‡§æ‡•§`, () => {
                    hideModals();
                    showScreen('home-screen', true);
                }, 'success');

            } catch (error) {
                console.error("‡§®‡§ø‡§ï‡§æ‡§∏‡•Ä ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø:", error);
                showMessageModal("‡§§‡•ç‡§∞‡•Å‡§ü‡§ø", "‡§Ü‡§™‡§ï‡•á ‡§Ö‡§®‡•Å‡§∞‡•ã‡§ß ‡§™‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§à ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§•‡•Ä‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§", null, 'error');
            } finally {
                document.getElementById('uid-input').value = '';
                currentOffer = null;
            }
        });

    </script>
    
    <!-- ‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏ ‡§µ‡§∞‡•ç‡§ï‡§∞ ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js').then(registration => {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }, err => {
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }
    </script>
</body>
</html>
